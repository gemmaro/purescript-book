# 日本語訳について

生成された日本語訳のドキュメントは`../text-ja/*`にあります。

日本語訳を改善するパッチを歓迎します。
翻訳内容そのものはもちろん、後述の自動検証の整備について改善の余地があります。
改善に協力される際は以降の内容に注意してください。

必要なものはpo4a、POファイルを編集するテキストエディタ、Node.jsです。
予め`npm i`として使用する依存関係をインストールしておきます。

[po4a][]は日本語訳の管理用に採用しています。
そのため翻訳の変更については`ja.po`ファイルを編集してください。
生成物（Markdownファイル）をそのまま編集してはなりません。
`npm run translate`とすれば翻訳が更新されます。
なお、po4aはバージョンによってMarkdownの字句解析が異なる場合があります。
`.po4a-version`に記載されているものと可能な限り近いバージョンを使用してください。

[po4a]: https://po4a.org/

生成物に対しての自動的な検証を幾つか導入しています。
`npm run lint`で検証します。

翻訳文はtextlintを使います。
`npm run lint:text`で検証します。
いくつかの規則は`../.textlintrc.json`で無効にしています。
例えば`preset-jtf-style/1.1.3.箇条書き`は、コードブロックを含む場合に文末の句読点を揃えることが難しいため無効にしています。
`npx textlint --fix <ファイルパス>`で生成物に対する自動修正を行います。
ただし修正されるのは生成物なので、POファイルの対応箇所に反映する必要があります。

生成物のMarkdownはmarkdownlintを使います。
`npm run lint:md`で検証します。
こちらも幾つかの規則を無効にしていますが、原文でも無効にしているもの以外は可能な限り有効にできるようにしたいと考えています。

対応いただいた翻訳の編集内容について、著作権表示と利用許諾をご確認ください。
POファイルを編集した場合、著作権表示の追加ないし年度の更新をお願いします。
また、いただいたパッチの利用許諾は原文のものに準ずるものとします。
翻訳を作成する際に機械翻訳を援用しても構いませんが、生成された翻訳の権利関係に注意してください。

コミットメッセージは原文のリポジトリで採用されている形式に沿います。
特に翻訳に関するコミットタイトルは`[ translate ] ...`として原文の変更と区別します。
作業ブランチを切って細かくコミットし、パッチの作成時に`git rebase`で意味のある単位に整理することをお勧めします。

```text
[ translate ] Some descriptive commit title

* [ some ] smaller change

* [ other ] smaller change
```

上記が守られていないパッチについてはこちらでコミット内容を変更することがあります。
